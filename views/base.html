<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}{% endblock title %}</title>
    {% block head %}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="styles.css">
    
    {% endblock head %}
  </head>
  <body>
    <div class="container">
    <header class="d-flex flex-wrap align-items-center justify-content-center justify-content-md-between py-3 mb-4 border-bottom">
      <div class="col-md-3 mb-2 mb-md-0">
        <a href="/" class="d-inline-flex link-body-emphasis text-decoration-none">
          Logo
        </a>
      </div>

      <ul class="nav col-12 col-md-auto mb-2 justify-content-center mb-md-0">
        <li><a href="#" class="nav-link px-2 link-secondary">Home</a></li>
        <li><a href="#" class="nav-link px-2">Features</a></li>
        <li><a href="#" class="nav-link px-2">Pricing</a></li>
        <li><a href="#" class="nav-link px-2">FAQs</a></li>
        <li><a href="#" class="nav-link px-2">About</a></li>
      </ul>

      <div class="col-md-3 text-end">
        {% if session.loggedin == false %}
          <button type="button" class="btn btn-outline-primary me-2" data-bs-toggle="modal" data-bs-target="#login-modal">Login</button>
          <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#register-modal">Sign-up</button>
        {% else %}
          <a href="{% if session.user_type == 'staff' %}{{ 'staff/dashboard.php' }}{% else %} {{ 'user/dashboard.php'}}{% endif %}" class="btn btn-outline-primary">Dashboard</a>
          <a href="logout.php" class="btn btn-primary">Log Out</a>
        {% endif %}
      </div>
    </header>
  </div>
    {% block content %}    {% endblock content %}

    <!--Login Modal -->
    <div class="modal fade" id="login-modal" tabindex="-1" aria-labelledby="login-modal" aria-hidden="true">
    <div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Login</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <form method="post">
           <div class="modal-body">
                {% if success_register is not empty %}
                <div class="bg-success text-white text-center py-1 rounded-1 mb-3">{{success_register}}</div>
                {% endif %}
                <div class="mb-3">
                  <label for="email" class="form-label">Email address</label>
                  <input type="email" class="form-control" id="email" aria-describedby="emailHelp" name="email" required>
                </div>
                <div class="mb-3">
                  <label for="password" class="form-label">Password</label>
                  <input type="password" class="form-control" id="password" name="password" required>
                  {% if login_err is not empty %}
                  <span class="small text-warning">{{login_err}}</span>
                  {% endif %}
                </div>
            </div>
        <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary" name="login">Login</button>
        </div>
    </form>
    </div>
    </div>
    </div>

    <!--Register Modal -->
    <div class="modal fade" id="register-modal" tabindex="-1" aria-labelledby="register-modal" aria-hidden="true">
    <div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Register</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>

        <form method="post">
            <div class="modal-body">
                <div class="mb-3">
                    <label for="full-name" class="form-label">Full name</label>
                    <input type="text" class="form-control" id="full-name" aria-describedby="fullNameHelp" name="full-name" required>
                </div>
                <div class="mb-3">
                   <label for="r-email" class="form-label">Email address</label>
                   <input type="email" class="form-control" id="r-email" aria-describedby="emailHelp" name="r-email" required>
                   {% if r_email_err is not empty %}
                   <span class="small text-warning">{{r_email_err}}</span>
                   {% endif %}
                </div>
                <div class="mb-3">
                   <label for="r-password1" class="form-label">Password</label>
                   <input type="password" class="form-control" id="r-password1" name="r-password1" required>
                   {% if r_password1_err is not empty %}
                   <span class="small text-warning">{{r_password1_err}}</span>
                   {% endif %}
                </div>
                <div class="mb-3">
                    <label for="r-password2" class="form-label">Password</label>
                    <input type="password" class="form-control" id="r-password2" name="r-password2" required>
                    {% if r_password2_err is not empty %}
                    <span class="small text-warning">{{r_password2_err}}</span>
                    {% endif %}
                </div>
                <div class="mb-3">
                    <label for="passport" class="form-label">Passport</label>
                    <input type="text" class="form-control" id="passport" aria-describedby="passportHelp" name="passport">
                </div>
                <div class="mb-3">
                    <label for="contact" class="form-label">Contact number</label>
                    <input type="text" class="form-control" id="contact" aria-describedby="passportHelp" name="contact">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="submit" class="btn btn-primary" name="register">Register</button>
            </div>
        </form>
    </div>
    </div>
    </div>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    
    {% if (login_err is not empty or success_register is not empty) %}
    <script>
        $(document).ready(function(){
          $("#login-modal").modal("show");
        });
    </script>
    {% endif %}
    {% if (register_err is not empty ) %}
    <script>
        $(document).ready(function(){
          $("#register-modal").modal("show");
        });
    </script>
    {% endif %}

  </body>
</html>